<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ghaba Admin - Settings & Inventory</title>
    
    <link rel="icon" type="image/png" href="https://img.freepik.com/premium-vector/shopping-logo-vector-icon_636116-200.jpg?semt=ais_hybrid&w=740&q=80"> 
    
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <style>
        :root { --meesho-pink: #f10c59; --bg: #f0f2f5; }
        body { font-family: 'Segoe UI', sans-serif; background: var(--bg); margin: 0; display: none; } /* Security Check */
        
        .admin-header { background: white; padding: 15px 20px; display: flex; justify-content: space-between; align-items: center; box-shadow: 0 2px 5px rgba(0,0,0,0.1); position: sticky; top:0; z-index:100; }
        .container { max-width: 900px; margin: 20px auto; padding: 15px; }
        
        .upload-card, .settings-card { background: white; padding: 25px; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.05); margin-bottom: 20px; }
        
        .input-group { margin-bottom: 15px; }
        label { display: block; font-size: 13px; color: #666; margin-bottom: 5px; font-weight: 600; }
        input, select { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 8px; font-size: 14px; box-sizing: border-box; outline: none; }
        input:focus { border-color: var(--meesho-pink); }
        
        /* Current Status Badge */
        .status-badge { background: #fdf7fe; padding: 15px; border-radius: 8px; border: 1px solid #e1bee7; margin-bottom: 20px; display: flex; justify-content: space-around; text-align: center; }
        .status-badge div { flex: 1; }
        .status-badge b { color: var(--meesho-pink); display: block; font-size: 16px; margin-top: 5px; word-break: break-all; }

        .media-box { background: #fdf7fe; padding: 15px; border-radius: 8px; border: 1px dashed var(--meesho-pink); margin-bottom: 15px; }
        .media-row { display: grid; grid-template-columns: 1fr 80px 50px; gap: 10px; margin-bottom: 10px; align-items: center; }
        
        .file-input-wrapper { position: relative; overflow: hidden; display: inline-block; }
        .file-input-wrapper input[type=file] { position: absolute; left: 0; top: 0; opacity: 0; cursor: pointer; width: 100%; height: 100%; }
        .btn-file { background: #fff; border: 1px solid var(--meesho-pink); color: var(--meesho-pink); padding: 8px; border-radius: 5px; display: block; text-align: center; font-size: 11px; font-weight: bold; cursor: pointer; }

        .thumb-preview { width: 45px; height: 45px; border-radius: 4px; object-fit: cover; background: #eee; border: 1px solid #ddd; }

        .btn-upload { width: 100%; background: var(--meesho-pink); color: white; border: none; padding: 15px; border-radius: 8px; font-size: 16px; font-weight: bold; cursor: pointer; margin-top: 10px; transition: 0.3s; }
        .btn-upload:disabled { background: #ccc; cursor: not-allowed; }
        
        .btn-settings { background: #333; color: white; border: none; padding: 12px; border-radius: 8px; cursor: pointer; font-weight: bold; margin-top: 8px; width: 100%; }
        
        .preview-grid { display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; margin-top: 20px; }
        .p-card { background: white; padding: 10px; border-radius: 8px; border: 1px solid #eee; text-align: center; box-shadow: 0 2px 5px rgba(0,0,0,0.05); }
        .p-card img { width: 100%; height: 140px; object-fit: cover; border-radius: 5px; margin-bottom: 8px; }
        
        .settings-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        @media (max-width: 600px) { .settings-grid { grid-template-columns: 1fr; } }

        /* Loader */
        #loader-overlay { display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(255,255,255,0.8); z-index: 1000; justify-content: center; align-items: center; flex-direction: column; }
        .spinner { border: 4px solid #f3f3f3; border-top: 4px solid var(--meesho-pink); border-radius: 50%; width: 40px; height: 40px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
    </style>
</head>
<body>

    <div id="loader-overlay">
        <div class="spinner"></div>
        <p style="margin-top:10px; color:var(--meesho-pink); font-weight:bold;">Processing...</p>
    </div>

    <div class="admin-header">
        <h2><i class="fa-solid fa-user-shield"></i> Ghaba Admin</h2>
        <button onclick="logout()" style="background:#ff4757; color:white; border:none; padding:8px 15px; border-radius:5px; cursor:pointer; font-weight:bold;">Logout</button>
    </div>

    <div class="container">
        
        <div class="settings-card">
            <h3 style="margin-top:0; color:var(--meesho-pink);"><i class="fa-solid fa-gear"></i> Store Settings</h3>
            
            <div class="status-badge">
                <div>Current UPI ID <b id="currentUPIText">Loading...</b></div>
                <div style="border-left: 1px solid #ddd;">Current Password <b id="currentPassText">Loading...</b></div>
            </div>

            <div class="settings-grid">
                <div class="input-group">
                    <label>Change UPI ID</label>
                    <input type="text" id="adminUPI" placeholder="newid@upi">
                    <button class="btn-settings" onclick="updateUPI()">Update UPI</button>
                </div>
                <div class="input-group">
                    <label>Change Password</label>
                    <input type="text" id="adminPass" placeholder="Min 4 characters">
                    <button class="btn-settings" onclick="updatePass()">Update Password</button>
                </div>
            </div>
        </div>

        <div class="upload-card">
            <h3 style="margin-top:0; color:#333;"><i class="fa-solid fa-plus-circle"></i> Add New Product</h3>
            
            <div class="input-group">
                <label>Product Name*</label>
                <input type="text" id="pName" placeholder="Ex: Designer Saree">
            </div>

            <div style="display: flex; gap: 10px;">
                <div class="input-group" style="flex: 1;">
                    <label>Price (â‚¹)*</label>
                    <input type="number" id="pPrice" placeholder="599">
                </div>
                <div class="input-group" style="flex: 1;">
                    <label>Category*</label>
                    <select id="pCategory">
                        <option value="SAREE">Saree</option>
                        <option value="KURTIS">Kurtis & Dress</option>
                    </select>
                </div>
            </div>

            <label><i class="fa-solid fa-images"></i> Media (Photos & Video)</label>
            <div class="media-box">
                <div class="media-row">
                    <input type="text" id="url1" placeholder="Main Image URL*">
                    <div class="file-input-wrapper">
                        <span class="btn-file">Gallery</span>
                        <input type="file" accept="image/*" onchange="autoUrl(this, 1)">
                    </div>
                    <img id="pre1" class="thumb-preview" src="https://via.placeholder.com/50">
                </div>
                <div class="media-row">
                    <input type="text" id="url2" placeholder="Image 2 URL">
                    <div class="file-input-wrapper">
                        <span class="btn-file">Gallery</span>
                        <input type="file" accept="image/*" onchange="autoUrl(this, 2)">
                    </div>
                    <img id="pre2" class="thumb-preview" src="https://via.placeholder.com/50">
                </div>
                <div class="media-row">
                    <input type="text" id="url3" placeholder="Image 3 URL">
                    <div class="file-input-wrapper">
                        <span class="btn-file">Gallery</span>
                        <input type="file" accept="image/*" onchange="autoUrl(this, 3)">
                    </div>
                    <img id="pre3" class="thumb-preview" src="https://via.placeholder.com/50">
                </div>
                <div class="media-row">
                    <input type="text" id="url4" placeholder="Image 4 URL">
                    <div class="file-input-wrapper">
                        <span class="btn-file">Gallery</span>
                        <input type="file" accept="image/*" onchange="autoUrl(this, 4)">
                    </div>
                    <img id="pre4" class="thumb-preview" src="https://via.placeholder.com/50">
                </div>
                <div class="media-row">
                    <input type="text" id="url5" placeholder="Image 5 URL">
                    <div class="file-input-wrapper">
                        <span class="btn-file">Gallery</span>
                        <input type="file" accept="image/*" onchange="autoUrl(this, 5)">
                    </div>
                    <img id="pre5" class="thumb-preview" src="https://via.placeholder.com/50">
                </div>
                
                <label style="margin-top:10px;">Video Link</label>
                <input type="text" id="pVideo" placeholder="YouTube/Direct Video URL">
            </div>

            <button class="btn-upload" id="publishBtn" onclick="saveProduct()">PUBLISH TO STORE</button>
        </div>

        <div class="preview-section">
            <h3 style="margin-top:30px; color: var(--meesho-pink); border-bottom: 2px solid #ddd; padding-bottom: 10px;">
                <i class="fa-solid fa-boxes-stacked"></i> Live Inventory
            </h3>
            <div class="preview-grid" id="adminProductList">
                </div>
        </div>
    </div>

    <script src="admin.js"></script>
    
    <script>
        // JS se Page Loader control karne ke liye function
        function showLoader(show) {
            document.getElementById('loader-overlay').style.display = show ? 'flex' : 'none';
        }
    </script>
</body>
</html>